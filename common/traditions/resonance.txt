tr_resonance_adopt = {
    possible = {
        custom_tooltip = {
            fail_text = REQUIRES_FINISHED_PROPHECY
            has_country_flag = resonance_tradition_unlocked
        }
    }
    on_enabled = {
        hidden_effect = {
            species = {
                change_species_characteristics = {
                    add_trait = trait_auto_mod_originium_II
                    add_traits_at_start_of_list = yes
                }
            }
            every_owned_species = {
                limit = {
                    is_subspecies = root
                }
                change_species_characteristics = {
                    add_trait = trait_auto_mod_originium_II
                    add_traits_at_start_of_list = yes
                }
            }
            update_node_portraits_if_gestalt_effect = yes
            luminary_speech_effect = yes
        }
    }
    custom_tooltip_with_modifiers = tr_ori_ascension_adopt_tt

    unlocks_agenda = agenda_resonance_perfection
    modifier = {
        leader_lifespan_mult = 0.2
    }
}

tr_resonance_finish = {
    custom_tooltip_with_modifiers = tr_resonance_finish_tt
    modifier = {
        ascension_perks_add = 1
    }

    on_enabled = {
        hidden_effect = {
            country_event = { id = ori_timeline.80 }
            if = {
                limit = {
                    is_hive_empire = no
                }
                country_event = {
                    id = ori_ap.170
                }
            }
            else = {
                country_event = {
                    id = ori_ap.185
                }
            }
            luminary_speech_effect = yes
        }
    }

    tradition_swap = {
        # the wilderness recives no alternate authority
        trigger = {
            is_wilderness_empire = yes
        }
        custom_tooltip_with_modifiers = tr_resonance_finish_wilderness_tt
        modifier = {
            ascension_perks_add = 1
        }
    }
}

tr_resonance_frequency_regeneration = {
    modifier = {
    }

    custom_tooltip_with_modifiers = tr_resonance_frequency_regeneration_tt

    tradition_swap = {
        name = tr_resonance_frequency_regeneration_wilderness
        inherit_icon = yes
        trigger = {
            is_wilderness_empire = yes
        }
        custom_tooltip_with_modifiers = tr_resonance_frequency_regeneration_wilderness_tt
    }

    ai_weight = {
        factor = 5000
    }
}

tr_resonance_exemplary_frequencies = {
    possible = {
        has_tradition = tr_resonance_frequency_regeneration
    }
    modifier = {
        ORIGINOID_species_trait_points_add = 6
        BIOLOGICAL_species_trait_picks_add = 2
        modify_species_cost_mult = -0.50
    }
    custom_tooltip_with_modifiers = tr_resonance_exemplary_frequencies_tt

    ai_weight = {
        factor = 5000
    }
}

tr_resonance_stage_1_swap = {
    inline_script = {
        script = traditions/ori_tr_stage_1_tradition_swaps
    }

    ai_weight = {
        factor = 5000
    }
}

tr_resonance_stage_2_swap = {
    possible = {
        has_tradition = tr_resonance_stage_1_swap
    }

    inline_script = {
        script = traditions/ori_tr_stage_2_tradition_swaps
    }

    ai_weight = {
        factor = 5000
    }
}

tr_resonance_stage_3_swap = {
    possible = {
        has_tradition = tr_resonance_stage_1_swap
    }

    inline_script = {
        script = traditions/ori_tr_stage_3_tradition_swaps
    }

    ai_weight = {
        factor = 1000
    }
}

# Dummy tradition for tooltip generation
tr_resonance_neural_tuning = {
    possible = {
        # Called via tr_stage_1_tradition_swaps
        always = no
    }

    # Effects in the inline script for tooltip generation
    inline_script = {
        script = traditions/tr_resonance_neural_tuning
    }

    ai_weight = {
        factor = 0
    }
}

# Dummy tradition for tooltip generation
tr_resonance_heightened_attributes = {
    possible = {
        # Called via tr_stage_2_tradition_swaps
        always = no
    }

    # Effects in the inline script for tooltip generation
    inline_script = {
        script = traditions/tr_resonance_heightened_attributes
    }

    ai_weight = {
        factor = 0
    }
}

# Dummy tradition for tooltip generation
tr_resonance_buzz_elimination = {
    possible = {
        # Called via tr_stage_3_tradition_swaps
        always = no
    }

    # Effects in the inline script for tooltip generation
    inline_script = {
        script = traditions/tr_resonance_buzz_elimination
    }

    tradition_swap = {
        name = tr_resonance_buzz_elimination_xenophile
        inherit_name = yes
        inherit_icon = yes
        trigger = {
            OR = {
                OR = {
                    has_ethic = ethic_xenophile
                    has_ethic = ethic_fanatic_xenophile
                }
            }
        }
        # Effects in the inline script for tooltip generation
        inline_script = {
            script = traditions/tr_resonance_buzz_elimination_xenophile
        }
        weight = {
            factor = 1
        }
    }

    tradition_swap = {
        name = tr_resonance_buzz_elimination_wilderness
        inherit_icon = yes
        trigger = {
            is_wilderness_empire = yes
        }
        # Effects in the inline script for tooltip generation
        inline_script = {
            script = traditions/tr_resonance_buzz_elimination_wilderness
        }
        weight = {
            factor = 1
        }
    }

    ai_weight = {
        factor = 0
    }
}
